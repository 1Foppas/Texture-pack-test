<script>
async function addFolder(zip, path) {
  try {
    const response = await fetch(path + "/filelist.json");
    if (!response.ok) {
      console.warn("No filelist.json in " + path);
      return;
    }

    const files = await response.json();

    for (const file of files) {
      if (file.endsWith(".png") || file.endsWith(".mcmeta") || file.endsWith(".json")) {
        // add file to the zip
        const fileResp = await fetch(path + "/" + file);
        const blob = await fileResp.blob();
        zip.file(path + "/" + file, blob);
      } else {
        // if it's a folder, recurse
        await addFolder(zip, path + "/" + file);
      }
    }
  } catch (err) {
    console.error("Error reading folder:", path, err);
  }
}
</script>
